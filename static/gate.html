<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Belépés</title>
    <style>
      :root {
        --bg: #f5f5f5;
        --fg: #111;
        --card: #fff;
        --muted: #666;
        --accent: #2563eb;
        --shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
        --radius: 14px;
        --space: clamp(16px, 2.5vw, 28px);
        --font: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue",
          Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --bg: #0b0b0c;
          --fg: #e9e9ea;
          --card: #141416;
          --muted: #9aa0a6;
          --accent: #8ab4f8;
          --shadow: 0 6px 24px rgba(0, 0, 0, 0.5);
        }
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        min-height: 100%;
        display: grid;
        place-items: center;
        background: var(--bg);
        color: var(--fg);
        font: 400 clamp(15px, 1.6vw, 18px) / 1.4 var(--font);
        padding: 6vh 12px;
      }

      .card {
        width: min(560px, 100%);
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: clamp(20px, 3.5vw, 36px);
      }

      h1 {
        margin: 0 0 0.4rem 0;
        font-size: clamp(22px, 3.2vw, 30px);
        line-height: 1.2;
      }
      p.lead {
        margin: 0.25rem 0 1.25rem;
        color: var(--muted);
      }

      form {
        display: grid;
        gap: 14px;
      }
      .field {
        display: grid;
        gap: 8px;
      }
      label {
        font-weight: 600;
      }
      .input-row {
        display: flex;
        align-items: stretch;
        gap: 8px;
        width: 100%;
      }
      input[type="password"],
      input[type="text"] {
        flex: 1;
        padding: 12px 14px;
        border: 1px solid #d0d5dd;
        border-radius: 10px;
        background: transparent;
        color: inherit;
        outline: none;
      }
      input:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 25%, transparent);
      }

      .actions {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: flex-start;
        margin-top: 6px;
      }
      button.primary {
        padding: 12px 18px;
        border: 0;
        border-radius: 10px;
        cursor: pointer;
        background: var(--accent);
        color: #fff;
        font-weight: 700;
      }
      button[disabled] {
        opacity: 0.65;
        cursor: not-allowed;
      }
      .hint {
        font-size: 0.95em;
        color: var(--muted);
      }

      .error {
        display: none;
        margin-top: 2px;
        color: #b00020;
        font-weight: 600;
        font-size: 0.95em;
      }
      .error.show {
        display: block;
      }

      /* Kis kijelzőkön több hely a tapnak */
      @media (max-width: 480px) {
        .input-row {
          flex-direction: column;
        }

        button.primary {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <main class="card" role="main">
      <h1>Belépés</h1>
      <p class="lead">Írd be a jelszót az oldal megnyitásához.</p>

      <form id="gate" novalidate>
        <div class="field">
          <label for="pwd">Jelszó</label>
          <div class="input-row">
            <input
              id="pwd"
              name="pwd"
              type="password"
              autocomplete="current-password"
              inputmode="text"
              required
              aria-describedby="err"
            />
          </div>
          <div id="err" class="error" role="alert">Helytelen jelszó.</div>
        </div>

        <div class="actions">
          <button id="go" class="primary" type="submit">Belépés</button>
          <span class="hint">Nyomd meg az Entert is!</span>
        </div>
      </form>
    </main>

    <script>
      const BASE = "/vasvari-webdev/"; // ← ha nálad más az alapút, írd át
      const TARGET = BASE; // pl. BASE+"hu/" ha oda akarsz beléptetni
      const HASH =
        "e661698d21b6cf65acb34373b067c59080a433bcf0cd6fdee58c182eaa8d4f6c"; // ← ide kerül a jelszó SHA-256 hex-e

      const form = document.getElementById("gate");
      const pwd = document.getElementById("pwd");
      const btn = document.getElementById("go");
      const err = document.getElementById("err");

      async function sha256hex(s) {
        const enc = new TextEncoder().encode(s);
        const buf = await crypto.subtle.digest("SHA-256", enc);
        return [...new Uint8Array(buf)]
          .map((b) => b.toString(16).padStart(2, "0"))
          .join("");
      }

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        err.classList.remove("show");
        btn.disabled = true;

        const pass = (pwd.value || "").trim();
        const inputHash = await sha256hex(pass);

        // console.log("calc:", inputHash, "expected:", HASH);

        if (inputHash === HASH) {
          try {
            sessionStorage.setItem("vasvari_auth", HASH);
          } catch (_) {}
          location.replace(TARGET);
        } else {
          err.classList.add("show");
          pwd.select();
          btn.disabled = false;
        }
      });

      // autofocus mobilon is
      setTimeout(() => pwd.focus(), 0);
    </script>
  </body>
</html>
